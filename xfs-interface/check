MOV [R2],
R0
MOV R0,
"Fork"
PUSH R0

PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
5
ADD R2,
R1
MOV [R2],
R0
MOV R1,
BP
MOV R0,
5
ADD R1,
R0
MOV R0,
[R1]
MOV R1,
0
EQ R0,
R1
JZ R0,
2792
MOV R0,
1
MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV [R2],
R0
MOV R1,
BP
MOV R0,
7
ADD R1,
R0
MOV R0,
[R1]
MOV R1,
100
LE R0,
R1
JZ R0,
2790
MOV R0,
"SemLock"
PUSH R0

MOV R1,
BP
MOV R0,
6
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R0,
"Write"
PUSH R0

MOV R1,
BP
MOV R0,
10
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV R1,
[R2]
MOV R0,
R1
PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R0,
"SemUnLock"
PUSH R0

MOV R1,
BP
MOV R0,
6
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R1,
BP
MOV R0,
7
ADD R1,
R0
MOV R0,
[R1]
MOV R1,
2
ADD R0,
R1
MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV [R2],
R0
JMP 2618

JMP 2974

MOV R0,
2
MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV [R2],
R0
MOV R1,
BP
MOV R0,
7
ADD R1,
R0
MOV R0,
[R1]
MOV R1,
100
LE R0,
R1
JZ R0,
2974
MOV R0,
"SemLock"
PUSH R0

MOV R1,
BP
MOV R0,
6
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R0,
"Write"
PUSH R0

MOV R1,
BP
MOV R0,
10
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV R1,
[R2]
MOV R0,
R1
PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R0,
"SemUnLock"
PUSH R0

MOV R1,
BP
MOV R0,
6
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R1,
BP
MOV R0,
7
ADD R1,
R0
MOV R0,
[R1]
MOV R1,
2
ADD R0,
R1
MOV R2,
BP
MOV R1,
7
ADD R2,
R1
MOV [R2],
R0
JMP 2802

MOV R0,
"Semrelease"
PUSH R0

MOV R1,
BP
MOV R0,
6
ADD R1,
R0
MOV R0,
[R1]
MOV R0,
R0
PUSH R0

PUSH R0

PUSH R0

PUSH R0

CALL 0

SUB SP,
5
MOV R0,
5
MOV R1,
SP
ADD R1,
R0
MOV R0,
[R1]
MOV R2,
BP
MOV R1,
1
ADD R2,
R1
MOV [R2],
R0
MOV R0,
0
MOV R1,
BP
MOV R2,
2
SUB R1,
R2
MOV [R1],
R0
POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

POP R0

MOV BP,
[SP]
POP R0

RET



















2
1
4
3
6
5
8
7
10
9
12
11
14
13
16
15
18
17
20
19
22
21
24
23
26
25
28
27
30
29
32
31
34
33
36
35
38
37
40
39
42
41
44
43
46
45
48
47
50
49
52
51
54
53
56
55
58
57
60
59
62
61
64
63
66
65
68
67
70
69
72
71
74
73
76
75
78
77
80
79
82
81
84
83
86
85
88
87
90
89
92
91
94
93
96
95
98
97
100
99




























































































































































































































































































































































































































